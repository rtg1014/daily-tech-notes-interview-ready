## 데이터베이스에서 정규화(Normalization) 
- 데이터베이스에서 정규화(Normalization) 는 테이블을 정리하여 중복 데이터를 최소화하고, 데이터 무결성을 보장하는 과정을 의미합니다.
- 이를 통해 데이터 저장 용량을 줄이고, 삽입·갱신·삭제 이상(Anomaly) 현상을 해결할 수 있습니다. 정규화는 여러 단계가 존재하며, 대표적으로 1정규화(1NF), 2정규화(2NF), 3정규화(3NF), BCNF가 있습니다.

---


## 각 정규화 단계를 설명해주세요. 
### 제 1 정규화(1NF) 는 테이블 컬럼의 값이 원자값(Atomic Value)을 가지도록 정리하는 것을 의미합니다.

<br>
  
### 제 2 정규화(2NF) 는 1 정규화를 진행한 테이블에서 완전 함수 종속을 만족할 수 있도록 테이블을 분해하는 것인데요.
- 쉽게 표현하자면, 기본 키의 일부에만 종속된 속성이 없도록 분해하는 것을 의미합니다. A 속성을 통해서 B 속성의 값이 유일하게 정해지는 관계에서 A를 결정자라고 합니다.
- 가령 사용자 ID가 기본 키이며 값이 1입니다. 그리고, 사용자 ID 1번에 대응되는 유일한 이름 속성 값이 "B" 이라고 했을 때, 이름 속성의 결정자는 사용자 ID입니다.
- 2NF를 만족하기 위해서는 기본키의 부분 집합이 결정자가 될 수 없습니다.


<br>


### 제 3 정규화(3NF) 는 2 정규화를 진행한 테이블에서 이행적 종속을 제거하기 위해 테이블을 분해하는 것을 의미합니다. 
- A가 B를 결정하고, B가 C를 결정하는 경우에는 A가 C의 결정자가 되는데요. 이를 이행적 종속이라고 합니다.
- 3NF을 만족하기 위해서는 이행적 종속이 제거되도록 테이블을 분리해야 합니다.

<br>

### BCNF 정규화 는 3 정규화를 진행한 테이블의 모든 결정자가 반드시 후보키가 될 수 있도록 테이블을 분해하는 것을 의미합니다. 
- BCNF를 만족하기 위해서는 후보키가 아닌 결정자가 존재하지 않도록 테이블을 분리해야 합니다.

<br>


## 역정규화에 대해서 알고 계신가요? 
- 역정규화(Denormalization) 는 정규화된 데이터베이스에서 쓰기 성능을 희생하고 읽기 성능을 향상하기 위해 사용되는 전략입니다.
- 예를 들어, 전체 게시글의 수나 좋아요의 수를 계산해 특정 컬럼에 저장해서 읽기 성능을 항상 시킬 수 있습니다.
- 역정규화된 데이터베이스에서는 데이터의 중복을 허용하기 때문에 데이터의 일관성을 맞추기 위한 추가적인 작업이 필요합니다.


---
---

<br>


> ## 추가학습자료

[10분 테코톡] 켈리의 정규화
출처 : https://www.youtube.com/watch?v=mn7UTm0CbCc

<br>


### 📌 정규화(Normalization)
---

## **1. 정규화(Normalization)란?**
정규화는 **데이터 중복을 최소화하고, 데이터 구조를 체계적으로 만드는 과정**입니다.  
이 과정을 통해 **이상 현상(Anomaly)을 방지**하고, 데이터 무결성을 유지할 수 있습니다.  

### **✔ 정규화의 필요성**
데이터베이스를 제대로 설계하지 않으면 **삽입, 갱신, 삭제 시 문제가 발생할 수 있습니다**.  
이러한 문제를 **이상 현상(Anomaly)**이라고 합니다.  

---

## **2. 이상 현상(Anomalies)이란?**
이상 현상은 데이터가 중복되거나 정합성이 깨지는 문제를 뜻합니다.  
주로 **삽입 이상, 갱신 이상, 삭제 이상**이 있습니다.

- **삽입 이상 (Insertion Anomaly)**  
  → 데이터를 추가할 때 **불필요한 데이터도 함께 삽입해야 하는 문제**  
  예) 새로운 강의를 추가하려는데 수강생 정보가 없으면 추가할 수 없음
- **갱신 이상 (Update Anomaly)**  
  → 특정 데이터만 수정하면 **중복된 다른 데이터와 불일치 문제가 발생**  
  예) "결제 시스템 연동" 강의 가격을 변경해야 하는데, 1억 개의 레코드를 모두 수정해야 함
- **삭제 이상 (Deletion Anomaly)**  
  → 데이터를 삭제할 때 **꼭 필요한 정보도 함께 삭제되는 문제**  
  예) 특정 학생이 수업을 취소하면, 수업 자체의 정보도 같이 사라짐

---

## **3. 정규화 과정**
정규화는 크게 **1NF, 2NF, 3NF**로 나뉘며, 이외에도 **BCNF, 4NF, 5NF**가 존재합니다.  
먼저 **1NF ~ 3NF**까지 살펴보겠습니다.

---

### **📌 제 1 정규화 (1NF) – 컬럼에 원자값을 저장하기**
**🔹 1NF 조건**  
1. 각 컬럼에는 **하나의 속성(원자값)**만 저장해야 한다.  
2. 하나의 컬럼은 **동일한 타입의 값**만 가져야 한다.  
3. 컬럼의 순서는 중요하지 않다.

**❌ Before (1NF 적용 전)**  
| ID | 이름 | 수강 과목 | 성적 |
|----|------|-----------|----|
| 1001 | 로키 | 스프링 기초, 결제 시스템 연동 | A+ |
| 1002 | 몰리 | DB 설계 | B |

**✔ After (1NF 적용 후)**  
| ID | 이름 | 수강 과목 | 성적 |
|----|------|-----------|----|
| 1001 | 로키 | 스프링 기초 | A+ |
| 1001 | 로키 | 결제 시스템 연동 | A+ |
| 1002 | 몰리 | DB 설계 | B |

이렇게 **복수 값을 개별 행으로 분리**하여 데이터를 보다 쉽게 관리할 수 있도록 합니다.

---

### **📌 제 2 정규화 (2NF) – 부분적 종속 제거**
**🔹 2NF 조건**  
1. **1NF를 만족해야 한다.**  
2. **모든 속성이 기본 키에 완전 함수 종속**이어야 한다.  
   - 즉, 기본키의 일부만으로 특정 값을 찾을 수 없어야 한다.

**❌ Before (2NF 적용 전)**  
| 학번 | 이름 | 강의 | 강의비 |
|----|------|-----------|----|
| 1001 | 로키 | 스프링 기초 | 15,000 |
| 1001 | 로키 | 결제 시스템 연동 | 10,000 |
| 1002 | 몰리 | DB 설계 | 12,000 |

위 테이블에서 **이름**은 학번만으로 찾을 수 있고, **강의비**는 강의명만으로 찾을 수 있습니다.  
즉, 일부 키에만 종속되므로 **부분적 종속** 문제가 발생합니다.

**✔ After (2NF 적용 후) – 테이블 분리**
1️⃣ **학생 테이블**  
| 학번 | 이름 |
|----|------|
| 1001 | 로키 |
| 1002 | 몰리 |

2️⃣ **강의 테이블**  
| 강의 | 강의비 |
|-----------|----|
| 스프링 기초 | 15,000 |
| 결제 시스템 연동 | 10,000 |
| DB 설계 | 12,000 |

3️⃣ **수강 테이블**  
| 학번 | 강의 |
|----|-----------|
| 1001 | 스프링 기초 |
| 1001 | 결제 시스템 연동 |
| 1002 | DB 설계 |

이제 **부분적 종속이 사라졌고**, 데이터를 보다 일관성 있게 관리할 수 있습니다.

---

### **📌 제 3 정규화 (3NF) – 이행적 종속 제거**
**🔹 3NF 조건**  
1. **2NF를 만족해야 한다.**  
2. 기본키를 제외한 속성들 간에 **이행적 종속이 없어야 한다.**  
   - 즉, A → B → C 관계에서 A → C가 성립하면 안 됨

**❌ Before (3NF 적용 전)**
| 학번 | 이름 | 전공 | 교수님 |
|----|------|------|------|
| 1001 | 로키 | 백엔드 | 네오 |
| 1002 | 몰리 | 프론트엔드 | 폴라 |

여기서 **전공이 교수님을 결정**하기 때문에 **이행 종속** 문제가 발생합니다.

**✔ After (3NF 적용 후) – 테이블 분리**
1️⃣ **학생 테이블**  
| 학번 | 이름 | 전공 |
|----|------|------|
| 1001 | 로키 | 백엔드 |
| 1002 | 몰리 | 프론트엔드 |

2️⃣ **전공-교수 테이블**  
| 전공 | 교수님 |
|------|------|
| 백엔드 | 네오 |
| 프론트엔드 | 폴라 |

이제 **전공이 교수님을 결정하는 문제**를 해결했습니다.

---

## **4. 정규화의 장단점**
### ✅ **장점**
- 이상 현상을 방지하여 **데이터 무결성을 유지**할 수 있음
- **중복된 데이터가 줄어들어** 저장 공간 절약
- 쿼리 성능이 향상되고 유지보수가 용이

### ❌ **단점**
- **테이블이 많아지고 조인이 증가**하여 성능이 저하될 가능성
- 조인 연산이 많아지면서 **응답 속도 저하 및 테이블 락 발생 가능**
- 실무에서는 **성능을 고려해 정규화를 적절히 적용**해야 함

---

## **5. 마무리 및 숙제 🎯**
오늘 **1NF ~ 3NF**까지 알아봤고, 추가로 공부하면 좋은 내용도 있습니다.  
- **BCNF, 4NF, 5NF**에 대해 추가 학습해보세요!
- 본인의 프로젝트 ERD를 보면서 **정규화를 적용할 부분이 있는지 고민**해보세요.

정규화는 **이론적으로 완벽할수록 좋지만, 실무에서는 성능도 고려해야 합니다**.  



---
---

<Br>


> ## 기술면접시 추가로 알면 좋을 내용 추가

정규화(Normalization)에 대해 더욱 깊이 있는 이해를 원하신다면, 기술면접에서 나올 수 있는 포인트뿐만 아니라 실무에서 어떻게 적용되는지, 그리고 실무와 이론적인 차이를 이해하는 것이 중요합니다. 아래에서 정규화의 필요성, 각 정규형(NF)의 구체적인 원리, 실무에서의 활용, 그리고 보충해야 할 개념을 정리해드리겠습니다.

---

## 1. **정규화가 필요한 이유 (Why Normalization?)**
정규화는 데이터베이스 설계에서 중복을 제거하고, 데이터의 일관성과 무결성을 유지하기 위해 필수적인 과정입니다. 하지만 기술면접에서 단순히 "중복을 줄이기 위해"라는 답변만 하면 부족할 수 있습니다. **실제 이유를 더 깊게 설명해야 합니다.**

### 🔍 **정규화가 중요한 핵심 이유**
- **데이터 일관성(Data Consistency)**  
  - 중복 데이터가 있으면 데이터 수정 시 일관성을 유지하기 어렵습니다.  
  - 예: 특정 상품 가격이 여러 테이블에 중복되어 있을 경우, 한 곳에서만 수정하면 다른 곳에서는 여전히 이전 가격이 남아있어 문제가 발생합니다.

- **데이터 무결성(Data Integrity)**  
  - 삽입, 수정, 삭제 시 **이상(Anomaly)** 발생 가능성이 있습니다.  
  - 예: 특정 고객이 주문한 상품을 삭제했을 때 고객 정보까지 삭제되는 경우.

- **저장 공간 최적화(Storage Efficiency)**  
  - 같은 데이터가 중복 저장되면 불필요한 스토리지 낭비가 발생합니다.

- **조인(Join) 성능과 트레이드오프**  
  - 정규화를 하면 데이터가 여러 테이블로 나뉘면서 조회 시 조인이 필요해 성능이 저하될 수 있습니다.  
  - 반대로, 정규화를 하지 않으면 중복 데이터로 인해 데이터 크기가 커지고, 업데이트 성능이 떨어질 수 있습니다.

### 💡 **기술면접에서 더 깊이 있는 답변 예시**
> "정규화는 단순히 중복을 제거하는 것이 아니라 데이터 무결성을 보장하고, 수정 및 삭제 시 데이터 일관성을 유지하기 위한 것입니다. 하지만 정규화를 과하게 진행하면 조인 비용이 증가하여 조회 성능이 떨어질 수도 있습니다. 따라서 트랜잭션 성격과 조회 패턴을 고려한 적절한 정규화가 필요합니다."

---

## 2. **각 정규형(Normal Forms) 심층 분석**
정규형(NF)은 여러 단계로 나누어져 있으며, 일반적으로 **3NF 또는 BCNF** 수준까지 적용하는 것이 일반적입니다.

### **🔹 제 1 정규형 (1NF) - Atomicity**
#### 🔎 핵심 개념
- 컬럼이 원자값(Atomic Value)만 가지도록 테이블을 설계해야 합니다.
- 컬럼에 리스트, 배열, JSON과 같은 구조화된 데이터가 포함되지 않도록 합니다.

#### ✅ **기술면접에서 추가 질문 예시**
> "1NF가 깨지는 대표적인 예시는 무엇인가요?"  
> "JSON을 컬럼 안에 저장하는 것은 1NF를 위반하는 것인가요?"

#### 💡 **깊이 있는 답변**
- "1NF는 컬럼이 원자성을 가져야 한다는 개념입니다. 예를 들어, '강의_이름' 컬럼이 'Spring, JPA, Docker'와 같이 여러 값을 포함하고 있다면 이는 1NF를 위반한 것입니다."
- "JSON을 컬럼에 저장하는 것은 1NF를 위반할 가능성이 있습니다. 하지만 경우에 따라 비정규형(NoSQL) 데이터베이스에서 이를 허용할 수도 있습니다."

---

### **🔹 제 2 정규형 (2NF) - 완전 함수 종속 (Full Functional Dependency)**
#### 🔎 핵심 개념
- 1NF를 만족해야 하며, 부분적 종속(Partial Dependency)이 없어야 합니다.
- 즉, **기본키의 일부가 아닌 전체를 기준으로 모든 컬럼이 결정되어야 합니다.**

#### ✅ **기술면접에서 추가 질문 예시**
> "부분적 종속(Partial Dependency)이 발생하면 어떤 문제가 생기나요?"  
> "2NF를 위반하는 경우 발생할 수 있는 데이터 이상(Anomaly)은?"  

#### 💡 **깊이 있는 답변**
- "부분적 종속이 존재하면 특정 컬럼이 기본키의 일부에만 종속되므로, **중복 데이터가 증가**하고 **수정 이상(Update Anomaly)**이 발생할 수 있습니다."
- "예를 들어, '학생_ID'와 '강의_ID'가 복합 기본키인데, '학생_이름'이 '학생_ID'에만 종속된다면 학생 이름이 여러 행에 중복 저장될 수 있어 데이터 무결성이 깨질 수 있습니다."

---

### **🔹 제 3 정규형 (3NF) - 이행적 종속 제거 (Transitive Dependency)**
#### 🔎 핵심 개념
- 2NF를 만족해야 하며, **기본키가 아닌 컬럼이 다른 컬럼에 종속되지 않아야 합니다.**
- 즉, **A → B, B → C** 이면, **A → C**가 성립하지 않도록 테이블을 분리해야 합니다.

#### ✅ **기술면접에서 추가 질문 예시**
> "이행적 종속(Transitive Dependency)을 제거하지 않으면 어떤 문제가 발생하나요?"  
> "3NF를 적용할 때 항상 조인이 많아지는가요?"

#### 💡 **깊이 있는 답변**
- "이행적 종속이 있으면 특정 데이터를 수정할 때, 연관된 컬럼을 함께 수정해야 합니다. 예를 들어, '부서_ID'가 '부서_이름'을 결정하고, '부서_이름'이 '부서_위치'를 결정하는 경우, 부서 이름이 바뀌면 위치 정보도 함께 바꿔야 합니다."
- "3NF를 적용하면 데이터 정합성은 유지되지만, 테이블이 분리되면서 조인이 많아질 수도 있습니다. 이를 해결하기 위해 **정규화를 일부 포기하고 성능을 고려한 반정규화(De-normalization)를 진행할 수도 있습니다.**"

---

## 3. **정규화의 한계와 반정규화(De-Normalization)**
정규화의 목표는 데이터 일관성과 무결성을 유지하는 것이지만, 실무에서는 정규화를 과도하게 적용하면 조회 성능이 저하될 수 있습니다.

### 🔥 **정규화를 완전히 적용하지 않는 경우**
- **읽기(Read) 성능이 중요한 경우**
  - 실시간 대용량 트래픽이 발생하는 서비스(예: 뉴스 피드, 로그 데이터)에서는 조인을 최소화하기 위해 반정규화가 필요할 수 있음.
  
- **데이터 변경이 적고 조회가 많은 경우**
  - 예: 상품 카탈로그는 자주 변경되지 않고 조회만 많으므로, 일부 중복을 허용하여 정규화를 완화할 수도 있음.

### ✅ **기술면접에서 추가 질문 예시**
> "정규화를 적용하면 조인이 많아지는 단점이 있는데, 이를 해결하는 방법은?"  
> "반정규화(De-Normalization)를 적용할 때 주의할 점은?"

#### 💡 **깊이 있는 답변**
- "정규화로 인해 조회 성능이 저하될 수 있는데, 이를 해결하기 위해 캐싱(Redis), 데이터 중복 저장, 또는 View 테이블을 활용할 수도 있습니다."
- "반정규화는 조인 비용을 줄이지만, 데이터 일관성을 유지하기 위해 추가적인 동기화 로직을 고려해야 합니다."

---

## 📌 **결론: 기술면접에서 깊이 있는 답변을 위해**
1. 정규화의 목적이 **중복 제거**만이 아니라 **데이터 일관성, 무결성 유지**라는 점을 강조.
2. 각 정규형(NF)의 개념을 정확히 이해하고, **실무에서 발생할 수 있는 문제를 예제로 설명**.
3. 정규화의 한계를 알고, **조회 성능을 고려한 반정규화(De-Normalization)**의 개념도 숙지.
4. 면접에서는 단순히 개념 설명보다는 **실제 적용 사례**와 **트레이드오프(Trade-Off)**를 고려한 답변을 준비.


