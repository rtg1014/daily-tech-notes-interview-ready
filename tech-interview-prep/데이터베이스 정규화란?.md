## 데이터베이스에서 정규화(Normalization) 
- 데이터베이스에서 정규화(Normalization) 는 테이블을 정리하여 중복 데이터를 최소화하고, 데이터 무결성을 보장하는 과정을 의미합니다.
- 이를 통해 데이터 저장 용량을 줄이고, 삽입·갱신·삭제 이상(Anomaly) 현상을 해결할 수 있습니다. 정규화는 여러 단계가 존재하며, 대표적으로 1정규화(1NF), 2정규화(2NF), 3정규화(3NF), BCNF가 있습니다.

---


## 각 정규화 단계를 설명해주세요. 
### 제 1 정규화(1NF) 는 테이블 컬럼의 값이 원자값(Atomic Value)을 가지도록 정리하는 것을 의미합니다.

<br>
  
### 제 2 정규화(2NF) 는 1 정규화를 진행한 테이블에서 완전 함수 종속을 만족할 수 있도록 테이블을 분해하는 것인데요.
- 쉽게 표현하자면, 기본 키의 일부에만 종속된 속성이 없도록 분해하는 것을 의미합니다. A 속성을 통해서 B 속성의 값이 유일하게 정해지는 관계에서 A를 결정자라고 합니다.
- 가령 사용자 ID가 기본 키이며 값이 1입니다. 그리고, 사용자 ID 1번에 대응되는 유일한 이름 속성 값이 "B" 이라고 했을 때, 이름 속성의 결정자는 사용자 ID입니다.
- 2NF를 만족하기 위해서는 기본키의 부분 집합이 결정자가 될 수 없습니다.


<br>


### 제 3 정규화(3NF) 는 2 정규화를 진행한 테이블에서 이행적 종속을 제거하기 위해 테이블을 분해하는 것을 의미합니다. 
- A가 B를 결정하고, B가 C를 결정하는 경우에는 A가 C의 결정자가 되는데요. 이를 이행적 종속이라고 합니다.
- 3NF을 만족하기 위해서는 이행적 종속이 제거되도록 테이블을 분리해야 합니다.

<br>

### BCNF 정규화 는 3 정규화를 진행한 테이블의 모든 결정자가 반드시 후보키가 될 수 있도록 테이블을 분해하는 것을 의미합니다. 
- BCNF를 만족하기 위해서는 후보키가 아닌 결정자가 존재하지 않도록 테이블을 분리해야 합니다.

<br>


## 역정규화에 대해서 알고 계신가요? 
- 역정규화(Denormalization) 는 정규화된 데이터베이스에서 쓰기 성능을 희생하고 읽기 성능을 향상하기 위해 사용되는 전략입니다.
- 예를 들어, 전체 게시글의 수나 좋아요의 수를 계산해 특정 컬럼에 저장해서 읽기 성능을 항상 시킬 수 있습니다.
- 역정규화된 데이터베이스에서는 데이터의 중복을 허용하기 때문에 데이터의 일관성을 맞추기 위한 추가적인 작업이 필요합니다.


---
---

<br>


> ## 추가학습자료

[10분 테코톡] 켈리의 정규화
출처 : https://www.youtube.com/watch?v=mn7UTm0CbCc

<br>


### 📌 정규화(Normalization)
---

## **1. 정규화(Normalization)란?**
정규화는 **데이터 중복을 최소화하고, 데이터 구조를 체계적으로 만드는 과정**입니다.  
이 과정을 통해 **이상 현상(Anomaly)을 방지**하고, 데이터 무결성을 유지할 수 있습니다.  

### **✔ 정규화의 필요성**
데이터베이스를 제대로 설계하지 않으면 **삽입, 갱신, 삭제 시 문제가 발생할 수 있습니다**.  
이러한 문제를 **이상 현상(Anomaly)**이라고 합니다.  

---

## **2. 이상 현상(Anomalies)이란?**
이상 현상은 데이터가 중복되거나 정합성이 깨지는 문제를 뜻합니다.  
주로 **삽입 이상, 갱신 이상, 삭제 이상**이 있습니다.

- **삽입 이상 (Insertion Anomaly)**  
  → 데이터를 추가할 때 **불필요한 데이터도 함께 삽입해야 하는 문제**  
  예) 새로운 강의를 추가하려는데 수강생 정보가 없으면 추가할 수 없음
- **갱신 이상 (Update Anomaly)**  
  → 특정 데이터만 수정하면 **중복된 다른 데이터와 불일치 문제가 발생**  
  예) "결제 시스템 연동" 강의 가격을 변경해야 하는데, 1억 개의 레코드를 모두 수정해야 함
- **삭제 이상 (Deletion Anomaly)**  
  → 데이터를 삭제할 때 **꼭 필요한 정보도 함께 삭제되는 문제**  
  예) 특정 학생이 수업을 취소하면, 수업 자체의 정보도 같이 사라짐

---

## **3. 정규화 과정**
정규화는 크게 **1NF, 2NF, 3NF**로 나뉘며, 이외에도 **BCNF, 4NF, 5NF**가 존재합니다.  
먼저 **1NF ~ 3NF**까지 살펴보겠습니다.

---

### **📌 제 1 정규화 (1NF) – 컬럼에 원자값을 저장하기**
**🔹 1NF 조건**  
1. 각 컬럼에는 **하나의 속성(원자값)**만 저장해야 한다.  
2. 하나의 컬럼은 **동일한 타입의 값**만 가져야 한다.  
3. 컬럼의 순서는 중요하지 않다.

**❌ Before (1NF 적용 전)**  
| ID | 이름 | 수강 과목 | 성적 |
|----|------|-----------|----|
| 1001 | 로키 | 스프링 기초, 결제 시스템 연동 | A+ |
| 1002 | 몰리 | DB 설계 | B |

**✔ After (1NF 적용 후)**  
| ID | 이름 | 수강 과목 | 성적 |
|----|------|-----------|----|
| 1001 | 로키 | 스프링 기초 | A+ |
| 1001 | 로키 | 결제 시스템 연동 | A+ |
| 1002 | 몰리 | DB 설계 | B |

이렇게 **복수 값을 개별 행으로 분리**하여 데이터를 보다 쉽게 관리할 수 있도록 합니다.

---

### **📌 제 2 정규화 (2NF) – 부분적 종속 제거**
**🔹 2NF 조건**  
1. **1NF를 만족해야 한다.**  
2. **모든 속성이 기본 키에 완전 함수 종속**이어야 한다.  
   - 즉, 기본키의 일부만으로 특정 값을 찾을 수 없어야 한다.

**❌ Before (2NF 적용 전)**  
| 학번 | 이름 | 강의 | 강의비 |
|----|------|-----------|----|
| 1001 | 로키 | 스프링 기초 | 15,000 |
| 1001 | 로키 | 결제 시스템 연동 | 10,000 |
| 1002 | 몰리 | DB 설계 | 12,000 |

위 테이블에서 **이름**은 학번만으로 찾을 수 있고, **강의비**는 강의명만으로 찾을 수 있습니다.  
즉, 일부 키에만 종속되므로 **부분적 종속** 문제가 발생합니다.

**✔ After (2NF 적용 후) – 테이블 분리**
1️⃣ **학생 테이블**  
| 학번 | 이름 |
|----|------|
| 1001 | 로키 |
| 1002 | 몰리 |

2️⃣ **강의 테이블**  
| 강의 | 강의비 |
|-----------|----|
| 스프링 기초 | 15,000 |
| 결제 시스템 연동 | 10,000 |
| DB 설계 | 12,000 |

3️⃣ **수강 테이블**  
| 학번 | 강의 |
|----|-----------|
| 1001 | 스프링 기초 |
| 1001 | 결제 시스템 연동 |
| 1002 | DB 설계 |

이제 **부분적 종속이 사라졌고**, 데이터를 보다 일관성 있게 관리할 수 있습니다.

---

### **📌 제 3 정규화 (3NF) – 이행적 종속 제거**
**🔹 3NF 조건**  
1. **2NF를 만족해야 한다.**  
2. 기본키를 제외한 속성들 간에 **이행적 종속이 없어야 한다.**  
   - 즉, A → B → C 관계에서 A → C가 성립하면 안 됨

**❌ Before (3NF 적용 전)**
| 학번 | 이름 | 전공 | 교수님 |
|----|------|------|------|
| 1001 | 로키 | 백엔드 | 네오 |
| 1002 | 몰리 | 프론트엔드 | 폴라 |

여기서 **전공이 교수님을 결정**하기 때문에 **이행 종속** 문제가 발생합니다.

**✔ After (3NF 적용 후) – 테이블 분리**
1️⃣ **학생 테이블**  
| 학번 | 이름 | 전공 |
|----|------|------|
| 1001 | 로키 | 백엔드 |
| 1002 | 몰리 | 프론트엔드 |

2️⃣ **전공-교수 테이블**  
| 전공 | 교수님 |
|------|------|
| 백엔드 | 네오 |
| 프론트엔드 | 폴라 |

이제 **전공이 교수님을 결정하는 문제**를 해결했습니다.

---

## **4. 정규화의 장단점**
### ✅ **장점**
- 이상 현상을 방지하여 **데이터 무결성을 유지**할 수 있음
- **중복된 데이터가 줄어들어** 저장 공간 절약
- 쿼리 성능이 향상되고 유지보수가 용이

### ❌ **단점**
- **테이블이 많아지고 조인이 증가**하여 성능이 저하될 가능성
- 조인 연산이 많아지면서 **응답 속도 저하 및 테이블 락 발생 가능**
- 실무에서는 **성능을 고려해 정규화를 적절히 적용**해야 함

---

## **5. 마무리 및 숙제 🎯**
오늘 **1NF ~ 3NF**까지 알아봤고, 추가로 공부하면 좋은 내용도 있습니다.  
- **BCNF, 4NF, 5NF**에 대해 추가 학습해보세요!
- 본인의 프로젝트 ERD를 보면서 **정규화를 적용할 부분이 있는지 고민**해보세요.

정규화는 **이론적으로 완벽할수록 좋지만, 실무에서는 성능도 고려해야 합니다**.  
